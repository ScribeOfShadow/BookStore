@model IEnumerable<BookStore.Models.RequestBook>

@{
    ViewBag.Title = "Index";

}
<head>
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" />
    <link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />

</head>



<body>


    @if (Request.IsAuthenticated && User.IsInRole("Admin"))
    {<h2>Requested Books</h2>

        <table id="table" class="table table-striped table-bordered dt-responsive nowrap">
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Book_Request)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Date_Requested)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Admindecision)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Book_Author)
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Book_Request)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Date_Requested)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Book_Author)
                    </td>
                    <td>
                        @if (item.Admindecision == true)
                        {
                            @ViewBag.Approved
                        }
                        else if (item.Admindecision == false)
                        {
                            @ViewBag.Pending
                        }
                    </td>
                    <td>
                        @Html.ActionLink("Approve", "Edit", new { id = item.Book_RequestId }, new { @class = "glyphicon glyphicon-ok-sign" })
                        @Html.ActionLink("Delete", "Delete", new { id = item.Book_RequestId }, new { @class = "glyphicon glyphicon-trash" })
                    </td>
                </tr>
            }

        </table>
    }

    else if (Request.IsAuthenticated && User.IsInRole("Student"))
    {
        <h2>Requested Books</h2>

        <p>
            @Html.ActionLink("Request", "Create")
        </p>
        <table id="table" class="table table-striped table-bordered dt-responsive nowrap">
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Book_Request)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Date_Requested)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Admindecision)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Book_Author)
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Book_Request)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Date_Requested)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Book_Author)
                    </td>
                    <td>
                        @if (item.Admindecision == true)
                        {
                            @ViewBag.Approved
                        }
                        else if (item.Admindecision == false)
                        {
                            @ViewBag.Pending
                        }
                    </td>

                </tr>
            }

        </table>

    }

    else if (Request.IsAuthenticated && User.IsInRole("Teacher"))
    {
        <h2>Requested Books</h2>

        <p>
            @Html.ActionLink("Request", "Create")
        </p>
        <table class="table">
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Book_Request)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Date_Requested)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Admindecision)
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Book_Request)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Date_Requested)
                    </td>
                    <td>
                        @if (item.Admindecision == true)
                        {
                            @ViewBag.Approved
                        }
                        else if (item.Admindecision == false)
                        {
                            @ViewBag.Pending
                        }
                    </td>

                </tr>
            }

        </table>

    }

    else
    {
        <h2 class="AddLinkTab" style="margin-top:100px; align-self:center">You do not have permission to view this page</h2>
    }
</body>
